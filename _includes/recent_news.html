<div class="recent-news">
  {%- assign posts = site.news -%} {%- if posts == nil or posts.size == 0 -%}
  {%- assign posts = site.announcements -%} {%- endif -%} {%- assign now_y =
  'now' | date: '%Y' | plus: 0 -%} {%- assign now_m = 'now' | date: '%m' | plus:
  0 -%} {%- assign now_idx = now_y | times: 12 | plus: now_m -%} {%- assign
  cutoff_idx = now_idx | minus: 24 -%} {% comment %} last 24 months {%
  endcomment %} {%- assign posts_sorted = posts | sort: 'date' | reverse -%} {%-
  assign shown = 0 -%}

  <ul class="recent-news__list">
    {%- for item in posts_sorted -%} {%- assign y = item.date | date: '%Y' |
    plus: 0 -%} {%- assign m = item.date | date: '%m' | plus: 0 -%} {%- assign
    idx = y | times: 12 | plus: m -%} {%- if idx >= cutoff_idx -%} {%- assign
    shown = shown | plus: 1 -%}
    <li class="recent-news__item">
      <span class="recent-news__date">{{ item.date | date: "%b %Y" }}</span>
      <span class="recent-news__text">
        {%- if item.inline -%} {{ item.content | remove: '
        <p>' | remove: '</p>
        ' | emojify }} {%- else -%}
        <a href="{{ item.url | relative_url }}">{{ item.title }}</a>
        {%- endif -%}
      </span>
    </li>
    {%- if include.limit and shown >= include.limit -%}{% break %}{%- endif -%}
    {%- endif -%} {%- endfor -%}
  </ul>

  {%- if shown == 0 -%}
  <div class="recent-news__empty">No news in the last 2 years yet.</div>
  {%- endif -%}
</div>
